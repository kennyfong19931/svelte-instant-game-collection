import{S as t,i as e,s,z as a,A as l,B as n,t as r,n as o,D as c,a as i,e as f,o as $,a1 as u,g as h,f as p,b as m,d,p as g,h as x,j as y,k as v,r as b,x as w,a3 as E,w as P,T as S,u as T,a2 as N}from"./client.c77ad6b0.js";import{S as j,C as A,I as _}from"./index.a66560f6.js";function B(t,e,s){const a=t.slice();return a[8]=e[s],a}function D(t,e,s){const a=t.slice();return a[5]=e[s],a}function I(t){let e,s;const i=new A.Title({props:{title:t[5].title,subheader:t[5].brand}});return{c(){e=f("div"),a(i.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var s=d(e);l(i.$$.fragment,s),s.forEach(h),this.h()},h(){x(e,"slot","title")},m(t,a){y(t,e,a),n(i,e,null),s=!0},p(t,e){const s={};4&e&&(s.title=t[5].title),4&e&&(s.subheader=t[5].brand),i.$set(s)},i(t){s||(r(i.$$.fragment,t),s=!0)},o(t){o(i.$$.fragment,t),s=!1},d(t){t&&h(e),c(i)}}}function k(t){let e,s;const i=new _({props:{class:"w-full",src:t[5].image}});return{c(){e=f("div"),a(i.$$.fragment),this.h()},l(t){e=m(t,"DIV",{slot:!0});var s=d(e);l(i.$$.fragment,s),s.forEach(h),this.h()},h(){x(e,"slot","media")},m(t,a){y(t,e,a),n(i,e,null),s=!0},p(t,e){const s={};4&e&&(s.src=t[5].image),i.$set(s)},i(t){s||(r(i.$$.fragment,t),s=!0)},o(t){o(i.$$.fragment,t),s=!1},d(t){t&&h(e),c(i)}}}function O(t){let e;return{c(){e=$("event_available")},l(t){e=g(t,"event_available")},m(t,s){y(t,e,s)},d(t){t&&h(e)}}}function U(t){let e;return{c(){e=$("event_busy")},l(t){e=g(t,"event_busy")},m(t,s){y(t,e,s)},d(t){t&&h(e)}}}function V(t){let e,s,a=t[8]+"";return{c(){e=f("span"),s=$(a),this.h()},l(t){e=m(t,"SPAN",{class:!0});var l=d(e);s=g(l,a),l.forEach(h),this.h()},h(){x(e,"class","pt-px px-1")},m(t,a){y(t,e,a),v(e,s)},p(t,e){4&e&&a!==(a=t[8]+"")&&b(s,a)},d(t){t&&h(e)}}}function C(t){let e;return{c(){e=$("shopping_cart")},l(t){e=g(t,"shopping_cart")},m(t,s){y(t,e,s)},d(t){t&&h(e)}}}function q(t){let e,s,u,w,P,T,N,j,A,_,D,I,k,q,z,H,F,G,J,K,L=t[5].startTime+"",M=t[5].endTime+"";const Q=new S({props:{small:!0,class:"py-1",$$slots:{default:[O]},$$scope:{ctx:t}}}),R=new S({props:{small:!0,class:"py-1",$$slots:{default:[U]},$$scope:{ctx:t}}});let W=t[5].platforms,X=[];for(let e=0;e<W.length;e+=1)X[e]=V(B(t,W,e));const Y=new S({props:{small:!0,class:"py-1",$$slots:{default:[C]},$$scope:{ctx:t}}});return{c(){e=f("div"),s=f("button"),a(Q.$$.fragment),u=i(),w=f("span"),P=$(L),T=i(),N=f("button"),a(R.$$.fragment),j=i(),A=f("span"),_=$(M),D=i(),I=f("button");for(let t=0;t<X.length;t+=1)X[t].c();k=i(),q=f("button"),a(Y.$$.fragment),z=i(),H=f("span"),F=f("a"),G=$("PS Store"),this.h()},l(t){e=m(t,"DIV",{slot:!0,class:!0});var a=d(e);s=m(a,"BUTTON",{class:!0});var n=d(s);l(Q.$$.fragment,n),u=p(n),w=m(n,"SPAN",{class:!0});var r=d(w);P=g(r,L),r.forEach(h),n.forEach(h),T=p(a),N=m(a,"BUTTON",{class:!0});var o=d(N);l(R.$$.fragment,o),j=p(o),A=m(o,"SPAN",{class:!0});var c=d(A);_=g(c,M),c.forEach(h),o.forEach(h),D=p(a),I=m(a,"BUTTON",{class:!0});var i=d(I);for(let t=0;t<X.length;t+=1)X[t].l(i);i.forEach(h),k=p(a),q=m(a,"BUTTON",{class:!0});var f=d(q);l(Y.$$.fragment,f),z=p(f),H=m(f,"SPAN",{class:!0});var $=d(H);F=m($,"A",{target:!0,href:!0});var x=d(F);G=g(x,"PS Store"),x.forEach(h),$.forEach(h),f.forEach(h),a.forEach(h),this.h()},h(){x(w,"class","pt-px px-1"),x(s,"class","rounded-full cursor-default flex item-center m-1 px-2 py-1 bg-success-500 text-white"),x(A,"class","pt-px px-1"),x(N,"class","rounded-full cursor-default flex item-center m-1 px-2 py-1 bg-error-500 text-white"),x(I,"class","rounded-full cursor-default flex item-center m-1 px-2 py-1 bg-light-blue-500 text-white"),x(F,"target","_blank"),x(F,"href",J="https://store.playstation.com/#!/cid="+t[5].code),x(H,"class","pt-px px-1"),x(q,"class","rounded-full flex item-center m-1 px-2 py-1 bg-blue-500 text-white"),x(e,"slot","text"),x(e,"class","p-5 pt-3 text-gray-700 body-2")},m(t,a){y(t,e,a),v(e,s),n(Q,s,null),v(s,u),v(s,w),v(w,P),v(e,T),v(e,N),n(R,N,null),v(N,j),v(N,A),v(A,_),v(e,D),v(e,I);for(let t=0;t<X.length;t+=1)X[t].m(I,null);v(e,k),v(e,q),n(Y,q,null),v(q,z),v(q,H),v(H,F),v(F,G),K=!0},p(t,e){const s={};2048&e&&(s.$$scope={dirty:e,ctx:t}),Q.$set(s),(!K||4&e)&&L!==(L=t[5].startTime+"")&&b(P,L);const a={};if(2048&e&&(a.$$scope={dirty:e,ctx:t}),R.$set(a),(!K||4&e)&&M!==(M=t[5].endTime+"")&&b(_,M),4&e){let s;for(W=t[5].platforms,s=0;s<W.length;s+=1){const a=B(t,W,s);X[s]?X[s].p(a,e):(X[s]=V(a),X[s].c(),X[s].m(I,null))}for(;s<X.length;s+=1)X[s].d(1);X.length=W.length}const l={};2048&e&&(l.$$scope={dirty:e,ctx:t}),Y.$set(l),(!K||4&e&&J!==(J="https://store.playstation.com/#!/cid="+t[5].code))&&x(F,"href",J)},i(t){K||(r(Q.$$.fragment,t),r(R.$$.fragment,t),r(Y.$$.fragment,t),K=!0)},o(t){o(Q.$$.fragment,t),o(R.$$.fragment,t),o(Y.$$.fragment,t),K=!1},d(t){t&&h(e),c(Q),c(R),E(X,t),c(Y)}}}function z(t){let e,s,a;return{c(){e=i(),s=i(),a=i()},l(t){e=p(t),s=p(t),a=p(t)},m(t,l){y(t,e,l),y(t,s,l),y(t,a,l)},p:T,i:T,o:T,d(t){t&&h(e),t&&h(s),t&&h(a)}}}function H(t){let e;const s=new A.Card({props:{class:"m-5 w-full md:w-1/3 lg:w-1/5",$$slots:{default:[z],text:[q],media:[k],title:[I]},$$scope:{ctx:t}}});return{c(){a(s.$$.fragment)},l(t){l(s.$$.fragment,t)},m(t,a){n(s,t,a),e=!0},p(t,e){const a={};2052&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a)},i(t){e||(r(s.$$.fragment,t),e=!0)},o(t){o(s.$$.fragment,t),e=!1},d(t){c(s,t)}}}function F(t){let e,s,S,T,N,A,_,B,I,k,O,U,V;document.title=e="PlayStation®Plus 免費遊戲 "+t[1]+"年";const C=new j({props:{label:J,items:t[3]}});C.$on("change",t[4]);let q=t[2],z=[];for(let e=0;e<q.length;e+=1)z[e]=H(D(t,q,e));const F=t=>o(z[t],1,1,()=>{z[t]=null});return{c(){s=i(),S=f("h4"),T=$("PlayStation®Plus 免費遊戲 "),N=f("span"),A=$(t[0]),_=i(),B=$(t[1]),I=$("年"),k=i(),a(C.$$.fragment),O=i(),U=f("div");for(let t=0;t<z.length;t+=1)z[t].c();this.h()},l(e){u('[data-svelte="svelte-12cc3ao"]',document.head).forEach(h),s=p(e),S=m(e,"H4",{});var a=d(S);T=g(a,"PlayStation®Plus 免費遊戲 "),N=m(a,"SPAN",{class:!0});var n=d(N);A=g(n,t[0]),n.forEach(h),_=p(a),B=g(a,t[1]),I=g(a,"年"),a.forEach(h),k=p(e),l(C.$$.fragment,e),O=p(e),U=m(e,"DIV",{class:!0});var r=d(U);for(let t=0;t<z.length;t+=1)z[t].l(r);r.forEach(h),this.h()},h(){x(N,"class","uppercase"),x(U,"class","flex justify-center flex-wrap")},m(t,e){y(t,s,e),y(t,S,e),v(S,T),v(S,N),v(N,A),v(S,_),v(S,B),v(S,I),y(t,k,e),n(C,t,e),y(t,O,e),y(t,U,e);for(let t=0;t<z.length;t+=1)z[t].m(U,null);V=!0},p(t,[s]){(!V||2&s)&&e!==(e="PlayStation®Plus 免費遊戲 "+t[1]+"年")&&(document.title=e),(!V||1&s)&&b(A,t[0]),(!V||2&s)&&b(B,t[1]);const a={};if(8&s&&(a.items=t[3]),C.$set(a),4&s){let e;for(q=t[2],e=0;e<q.length;e+=1){const a=D(t,q,e);z[e]?(z[e].p(a,s),r(z[e],1)):(z[e]=H(a),z[e].c(),r(z[e],1),z[e].m(U,null))}for(P(),e=q.length;e<z.length;e+=1)F(e);w()}},i(t){if(!V){r(C.$$.fragment,t);for(let t=0;t<q.length;t+=1)r(z[t]);V=!0}},o(t){o(C.$$.fragment,t),z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)o(z[t]);V=!1},d(t){t&&h(s),t&&h(S),t&&h(k),c(C,t),t&&h(O),t&&h(U),E(z,t)}}}async function G({params:t,query:e}){let s={};const a=await this.fetch(`api/${t.region}/${t.year}.json`),l=await a.json();200===a.status&&"1000"===l.code?(s.region=t.region,s.year=t.year,s.data=l.data):this.error(a.status,l.code+" - "+l.message);const n=await this.fetch("api/hk/list.json"),r=await n.json();if(200===n.status&&"1000"===r.code){let t=[];r.data.forEach(e=>{t.push({value:e,text:e+"年"})}),s.items=t}else this.error(n.status,r.code+" - "+r.message);return s}const J="年份";function K(t,e,s){let{region:a}=e,{year:l}=e,{data:n}=e,{items:r=[]}=e;return t.$set=(t=>{"region"in t&&s(0,a=t.region),"year"in t&&s(1,l=t.year),"data"in t&&s(2,n=t.data),"items"in t&&s(3,r=t.items)}),[a,l,n,r,t=>(function(t){N("ps/hk/"+t)})(t.detail)]}export default class extends t{constructor(t){super(),e(this,t,K,F,s,{region:0,year:1,data:2,items:3})}}export{G as preload};
